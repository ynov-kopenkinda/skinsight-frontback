{"openapi":"3.0.0","paths":{"/auth/signup":{"post":{"operationId":"AuthController_signup","summary":"Create account and login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":""}},"tags":["Auth"]}},"/auth/signin":{"post":{"operationId":"AuthController_signin","summary":"Login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/loginUserDTO"}}}},"responses":{"201":{"description":""}},"tags":["Auth"]}},"/auth/refresh":{"get":{"operationId":"AuthController_refreshTokens","summary":"Refresh token","parameters":[],"responses":{"200":{"description":""}},"tags":["Auth"],"security":[{"access-token":[]}]}},"/users":{"get":{"operationId":"UsersController_getUsers","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"404":{"description":""}},"tags":["users"]},"post":{"operationId":"UsersController_createUser","summary":"Create a user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["users"]}},"/users/doctors":{"get":{"operationId":"UsersController_getDoctors","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"404":{"description":""}},"tags":["users"]}},"/users/{id}":{"get":{"operationId":"UsersController_getUserById","summary":"Get a user depending on passed id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["users"]},"patch":{"operationId":"UsersController_updateUser","summary":"Update a user depending on passed id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatchUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["users"]},"delete":{"operationId":"UsersController_deleteUser","summary":"Delete a user depending on passed id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["users"]}},"/users/doctor":{"post":{"operationId":"UsersController_createDoctor","summary":"Create a doctor","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["users"]}},"/chat-event/{chatId}":{"get":{"operationId":"ChatEventController_getChatEventsFromChatId","parameters":[{"name":"chatId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"tags":["ChatEvent"]},"post":{"operationId":"ChatEventController_createChatEvent","summary":"Get a chat-event depending on passed chat id","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateChatEventDto"}}}},"responses":{"201":{"description":""}},"tags":["ChatEvent"]}},"/chat/{id}":{"get":{"operationId":"ChatController_getChat","summary":"Get a chat depending on passed id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatDto"}}}}},"tags":["Chat"]},"delete":{"operationId":"ChatController_deleteChat","summary":"Delete a chat depending on passed id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatDto"}}}}},"tags":["Chat"]}},"/chat":{"post":{"operationId":"ChatController_createChat","summary":"Create a chat depending on passed id","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateChatDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatDto"}}}}},"tags":["Chat"]}},"/chat/user/{id}":{"get":{"operationId":"ChatController_getChatByUserId","summary":"Get chat(s) where an user appear","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"default":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GetChatByUserId"}}}}}},"tags":["Chat"]}},"/appointment":{"post":{"operationId":"AppointmentController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAppointmentDto"}}}},"responses":{"201":{"description":""}},"tags":["Appointments"]}},"/appointment/{id}":{"get":{"operationId":"AppointmentController_findOneAppointment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Appointment"}}}}},"tags":["Appointments"]}},"/appointment/doctor/{id}":{"get":{"operationId":"AppointmentController_findAllForDoctor","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Appointment"}}}}}},"tags":["Appointments"]}},"/appointment/patient/{id}":{"get":{"operationId":"AppointmentController_findAllForPatient","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Appointment"}}}}}},"tags":["Appointments"]}},"/appointment/user":{"get":{"operationId":"AppointmentController_findAllForOneUser","summary":"Get all appointment for the user logged","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Appointment"}}}}}},"tags":["Appointments"],"security":[{"access-token":[]}]}},"/appointment/{userId}/accept/{appointmentId}":{"patch":{"operationId":"AppointmentController_acceptAppointment","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"number"}},{"name":"appointmentId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Appointments"]}},"/appointment/{userId}/decline/{appointmentId}":{"patch":{"operationId":"AppointmentController_declineAppointment","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"number"}},{"name":"appointmentId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Appointments"]}},"/pre-appointment":{"post":{"operationId":"PreAppointmentController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePreAppointmentDto"}}}},"responses":{"201":{"description":""}},"tags":["PreAppointments"]}},"/pre-appointment/patient/{id}":{"get":{"operationId":"PreAppointmentController_findAllForPatient","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PreAppointment"}}}}}},"tags":["PreAppointments"]}},"/s3/signed-post-url":{"get":{"operationId":"S3Controller_getSignedPostUrl","parameters":[{"name":"userId","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignedPostUrlResponse"}}}}},"tags":["s3"]}},"/s3/signed-get-url":{"get":{"operationId":"S3Controller_getSignedGetUrl","parameters":[{"name":"s3key","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["s3"]}}},"info":{"title":"Web-Services API","description":"API du cours de web-services","version":"0.1","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"access-token":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateUserDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"phone":{"type":"string"},"heightInCm":{"type":"number"},"weightInKg":{"type":"number"},"ssn":{"type":"string"},"proDoctorNumber":{"type":"string"}},"required":["email","password","firstName","lastName","phone","heightInCm","weightInKg","ssn","proDoctorNumber"]},"loginUserDTO":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"User":{"type":"object","properties":{"id":{"type":"number"},"email":{"type":"string"},"password":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"phone":{"type":"string"},"heightInCm":{"type":"number"},"weightInKg":{"type":"number"},"ssn":{"type":"string"},"proDoctorNumber":{"type":"string"},"userRole":{"type":"string"}},"required":["id","email","password","firstName","lastName","phone","heightInCm","weightInKg","ssn","proDoctorNumber","userRole"]},"PatchUserDto":{"type":"object","properties":{"email":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"phone":{"type":"string"},"heightInCm":{"type":"number"},"weightInKg":{"type":"number"},"ssn":{"type":"string"},"proDoctorNumber":{"type":"string"}}},"CreateChatEventDto":{"type":"object","properties":{"chatId":{"type":"number"},"userId":{"type":"number"},"data":{"type":"string"},"chatEventType":{"type":"number"}},"required":["chatId","userId","data","chatEventType"]},"ChatEventDto":{"type":"object","properties":{"id":{"type":"number"},"chatId":{"type":"number"},"userId":{"type":"number"},"data":{"type":"string"},"chatEventType":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","chatId","userId","data","chatEventType","createdAt","updatedAt"]},"ChatDto":{"type":"object","properties":{"invitorId":{"type":"number"},"inviteeId":{"type":"number"},"createdAt":{"type":"string"},"ChatEvent":{"type":"array","items":{"$ref":"#/components/schemas/ChatEventDto"}}},"required":["invitorId","inviteeId","createdAt","ChatEvent"]},"CreateChatDto":{"type":"object","properties":{"invitorId":{"type":"number"},"inviteeId":{"type":"number"}},"required":["invitorId","inviteeId"]},"GetChatByUserId":{"type":"object","properties":{"id":{"type":"number"},"invitorId":{"type":"number"},"inviteeId":{"type":"number"},"lastMessage":{"type":"string"},"lastMessageDate":{"format":"date-time","type":"string"},"firstname":{"type":"string"}},"required":["id","invitorId","inviteeId","lastMessage","lastMessageDate","firstname"]},"CreateAppointmentDto":{"type":"object","properties":{"patientId":{"type":"number"},"doctorId":{"type":"number"},"location":{"type":"string"},"date":{"format":"date-time","type":"string"}},"required":["patientId","doctorId","location","date"]},"Appointment":{"type":"object","properties":{"id":{"type":"number"},"doctorId":{"type":"number"},"patientId":{"type":"number"},"isAcceptedByDoctor":{"type":"boolean"},"isAcceptedByPatient":{"type":"boolean"},"location":{"type":"string"},"date":{"format":"date-time","type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"doctor_name":{"type":"string"},"patient_name":{"type":"string"}},"required":["id","doctorId","patientId","isAcceptedByDoctor","isAcceptedByPatient","location","date","createdAt","updatedAt"]},"CreatePreAppointmentDto":{"type":"object","properties":{"doctorId":{"type":"number"},"patientId":{"type":"number"},"message":{"type":"string"},"image":{"type":"string"}},"required":["doctorId","patientId","message","image"]},"PreAppointment":{"type":"object","properties":{"id":{"type":"number"},"doctorId":{"type":"number"},"patientId":{"type":"number"},"message":{"type":"string"},"image":{"type":"string"},"createdAt":{"format":"date-time","type":"string"}},"required":["id","doctorId","patientId","message","image","createdAt"]},"SignedPostUrlResponse":{"type":"object","properties":{"url":{"type":"string"},"key":{"type":"string"}},"required":["url","key"]}}}}